<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hand Gesture Drawing</title>
    <script src="https://cdn.socket.io/4.0.1/socket.io.min.js"></script>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; }
        canvas { border: 2px solid black; background: rgb(77, 161, 234); display: block; margin: auto; }
        #clearButton { margin-top: 10px; padding: 10px 20px; font-size: 16px; cursor: pointer; }
    </style>
</head>
<body>

<h1>Hand Gesture Drawing</h1>
<canvas id="drawingCanvas" width="800" height="500"></canvas>
<br>
<button id="clearButton">Clear Canvas</button>

<script>
    const socket = io();
    const canvas = document.getElementById("drawingCanvas");
    const ctx = canvas.getContext("2d");
    let lastX = null, lastY = null;
    let drawing = false;

    socket.on("hand_data", function(message) {
        const data = JSON.parse(message);
        if (data.x === null || data.y === null) return;
        
        const x = data.x * canvas.width;
        const y = data.y * canvas.height;
        const gesture = data.gesture;

        if (gesture === "draw") {
            drawing = true;
            if (lastX !== null && lastY !== null) {
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(x, y);
                ctx.strokeStyle = "black";
                ctx.lineWidth = 5;
                ctx.stroke();
            }
            lastX = x;
            lastY = y;
        } else if (gesture === "erase") {
            drawing = false;
            ctx.clearRect(x - 20, y - 20, 40, 40);
            lastX = null;
            lastY = null;
        } else {
            drawing = false;
            lastX = null;
            lastY = null;
        }
    });

    document.getElementById("clearButton").addEventListener("click", () => {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
    });
</script>

</body>
</html>
